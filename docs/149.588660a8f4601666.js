"use strict";(self.webpackChunkjson_forms=self.webpackChunkjson_forms||[]).push([[149],{52149:(ot,N,n)=>{n.r(N),n.d(N,{PlaygroundPageComponent:()=>ft});var C=n(16837),o=n(91022),b=n(14214);const x_schema={properties:{comments:{type:"array",items:{type:"object",properties:{name:{type:"string"},message:{type:"string",minLength:10}},required:["name"]}}}},x_uiSchema={type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/comments",options:{elementLabelProp:"name",detail:{type:"HorizontalLayout",elements:[{type:"Control",label:"",scope:"#/properties/name"},{type:"Control",label:"",scope:"#/properties/message"}]}}}]},D_schema={type:"object",properties:{firstName:{type:"string"},lastName:{type:"string"},comment:{type:"string",description:"Multiline Example"}},required:["comment"]},D_uiSchema={type:"Group",label:"Personal Information",elements:[{type:"Control",scope:"#/properties/firstName",label:"First Name"},{type:"Control",scope:"#/properties/lastName",label:"Last Name"},{type:"Control",scope:"#/properties/comment",label:"Enter comment",options:{multi:!0,minRows:3}}],options:{submitLabel:"Publish comment"}},O_schema={type:"object",properties:{users:{type:"array",items:{type:"object",title:"Users",properties:{firstname:{type:"string"},lastname:{type:"string"},email:{type:"string",format:"email"},age:{type:"number",minimum:0}},required:["firstname"]}}}},O_uiSchema={type:"ListWithDetail",scope:"#/properties/users",options:{detail:{type:"VerticalLayout",elements:[{type:"HorizontalLayout",elements:[{type:"Control",scope:"#/properties/firstname",label:"First Name"},{type:"Control",scope:"#/properties/lastname",label:"Last Name"}]},{type:"Control",scope:"#/properties/age",label:"Age"},{type:"Control",scope:"#/properties/email",label:"Email"}]}}},y_schema={properties:{comments:{type:"array",items:{type:"object",properties:{name:{type:"string"}},required:["name"]}}}},y_uiSchema={type:"VerticalLayout",elements:[{type:"Control",scope:"#/properties/comments"}]},E_schema={type:"object",properties:{name:{type:"string"},dead:{type:"boolean"},kindOfDead:{type:"string",enum:["Zombie","Vampire","Ghoul"]},vegetables:{type:"boolean"},kindOfVegetables:{type:"string",enum:["All","Some","Only potatoes"]},withOther:{type:"string",enum:["She/Her","He/Him","They/Them","Other"]},otherStr:{type:"string"}}},E_uiSchema={type:"VerticalLayout",elements:[{type:"Control",label:"Name",scope:"#/properties/name"},{type:"Group",elements:[{type:"Control",label:"Is Dead?",scope:"#/properties/dead"},{type:"Control",label:"Kind of dead",scope:"#/properties/kindOfDead",rule:{effect:"ENABLE",condition:{scope:"#/properties/dead",schema:{const:!0}}}}]},{type:"Group",elements:[{type:"Control",label:"Eats vegetables?",scope:"#/properties/vegetables"},{type:"Control",label:"Kind of vegetables",scope:"#/properties/kindOfVegetables",rule:{effect:"HIDE",condition:{scope:"#/properties/vegetables",schema:{const:!1}}}}]},{type:"Control",label:"Select pronouns",scope:"#/properties/withOther"},{type:"Control",label:"Type whatever you want",scope:"#/properties/otherStr",rule:{effect:"SHOW",condition:{scope:"#/properties/withOther",schema:{enum:["Other"]}}}}]};var z=n(28525),A=n(36704),T=n(38231),f=n(36895),v=n(90433),Z=n(97582),t=n(94650),F=n(4707),M=n(61135),J=n(39646),j=n(77579),s=n(39841),h=n(54968),a=n(18505),d=n(54004),p=n(82722),u=n(78372),P=n(39300),S=n(71884),V=n(41355),U=n(3187),it=n(72536),st=n(83353),_=n(65681),at=n(47423);function rt(i,m){1&i&&(t.TgZ(0,"div",2),t._UZ(1,"nz-spin"),t.qZA())}function lt(i,m){}function dt(i,m){if(1&i&&(t.TgZ(0,"div",3),t.YNc(1,lt,0,0,"ng-template",4),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",e.nzToolkit)}}const Y="codeEditor";function R(i){return(...m)=>{i&&i(...m)}}const w=new F.t(1);let I="unload",ct=(()=>{class i{constructor(e,r){this.nzConfigService=e,this.firstEditorInitialized=!1,this.option={},this.option$=new M.X(this.option);const l=this.nzConfigService.getConfigForComponent(Y);this.document=r,this.config={...l},this.config.monacoEnvironment&&(window.MonacoEnvironment={...this.config.monacoEnvironment}),this.option=this.config.defaultEditorOption||{},this.subscription=this.nzConfigService.getConfigChangeEventForComponent(Y).subscribe(()=>{const c=this.nzConfigService.getConfigForComponent(Y);c&&this._updateDefaultOption(c.defaultEditorOption)})}ngOnDestroy(){this.subscription.unsubscribe(),this.subscription=null}_updateDefaultOption(e){this.option={...this.option,...e},this.option$.next(this.option),"theme"in e&&e.theme&&monaco.editor.setTheme(e.theme)}requestToInit(){return"LOADED"===I?(this.onInit(),(0,J.of)(this.getLatestOption())):("unload"===I&&(this.config.useStaticLoading&&typeof monaco>"u"?(0,V.ZK)("You choose to use static loading but it seems that you forget to config webpack plugin correctly. Please refer to our official websitefor more details about static loading."):this.loadMonacoScript()),w.pipe((0,a.b)(()=>this.onInit()),(0,d.U)(()=>this.getLatestOption())))}loadMonacoScript(){if(this.config.useStaticLoading)return void Promise.resolve().then(()=>this.onLoad());if("loading"===I)return;I="loading";const e=this.config.assetsRoot,r=e?`${e}/vs`:"assets/vs",l=window,c=this.document.createElement("script");c.type="text/javascript",c.src=`${r}/loader.js`;const g=()=>{nt(),l.require.config({paths:{vs:r},...this.config.extraConfig}),l.require(["vs/editor/editor.main"],()=>{this.onLoad()})},et=()=>{throw nt(),new Error(`${V.Bq} cannot load assets of monaco editor from source "${r}".`)},nt=()=>{c.removeEventListener("load",g),c.removeEventListener("error",et),this.document.documentElement.removeChild(c)};c.addEventListener("load",g),c.addEventListener("error",et),this.document.documentElement.appendChild(c)}onLoad(){I="LOADED",w.next(!0),w.complete(),R(this.config.onLoad)()}onInit(){this.firstEditorInitialized||(this.firstEditorInitialized=!0,R(this.config.onFirstEditorInit)()),R(this.config.onInit)()}getLatestOption(){return{...this.option}}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(it.jY),t.LFG(f.K0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),pt=(()=>{class i{constructor(e,r,l,c){this.nzCodeEditorService=e,this.ngZone=r,this.platform=c,this.nzEditorMode="normal",this.nzOriginalText="",this.nzLoading=!1,this.nzFullControl=!1,this.nzEditorInitialized=new t.vpe,this.editorOptionCached={},this.destroy$=new j.x,this.resize$=new j.x,this.editorOption$=new M.X({}),this.editorInstance=null,this.value="",this.modelSet=!1,this.onDidChangeContentDisposable=null,this.onChange=g=>{},this.onTouch=()=>{},this.el=l.nativeElement,this.el.classList.add("ant-code-editor")}set nzEditorOption(e){this.editorOption$.next(e)}ngAfterViewInit(){this.platform.isBrowser&&this.nzCodeEditorService.requestToInit().pipe((0,p.R)(this.destroy$)).subscribe(e=>this.setup(e))}ngOnDestroy(){this.onDidChangeContentDisposable&&(this.onDidChangeContentDisposable.dispose(),this.onDidChangeContentDisposable=null),this.editorInstance&&(this.editorInstance.dispose(),this.editorInstance=null),this.destroy$.next(),this.destroy$.complete()}writeValue(e){this.value=e,this.setValue()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}layout(){this.resize$.next()}setup(e){this.ngZone.runOutsideAngular(()=>(0,U.ov)().pipe((0,p.R)(this.destroy$)).subscribe(()=>{this.editorOptionCached=e,this.registerOptionChanges(),this.initMonacoEditorInstance(),this.registerResizeChange(),this.setValue(),this.nzFullControl||this.setValueEmitter(),this.nzEditorInitialized.observers.length&&this.ngZone.run(()=>this.nzEditorInitialized.emit(this.editorInstance))}))}registerOptionChanges(){(0,s.a)([this.editorOption$,this.nzCodeEditorService.option$]).pipe((0,p.R)(this.destroy$)).subscribe(([e,r])=>{this.editorOptionCached={...this.editorOptionCached,...r,...e},this.updateOptionToMonaco()})}initMonacoEditorInstance(){this.ngZone.runOutsideAngular(()=>{this.editorInstance="normal"===this.nzEditorMode?monaco.editor.create(this.el,{...this.editorOptionCached}):monaco.editor.createDiffEditor(this.el,{...this.editorOptionCached})})}registerResizeChange(){this.ngZone.runOutsideAngular(()=>{(0,h.R)(window,"resize").pipe((0,u.b)(300),(0,p.R)(this.destroy$)).subscribe(()=>{this.layout()}),this.resize$.pipe((0,p.R)(this.destroy$),(0,P.h)(()=>!!this.editorInstance),(0,d.U)(()=>({width:this.el.clientWidth,height:this.el.clientHeight})),(0,S.x)((e,r)=>e.width===r.width&&e.height===r.height),(0,u.b)(50)).subscribe(()=>{this.editorInstance.layout()})})}setValue(){if(this.editorInstance){if(this.nzFullControl&&this.value)return void(0,V.ZK)("should not set value when you are using full control mode! It would result in ambiguous data flow!");if("normal"===this.nzEditorMode)if(this.modelSet){const e=this.editorInstance.getModel();this.preservePositionAndSelections(()=>e.setValue(this.value))}else this.editorInstance.setModel(monaco.editor.createModel(this.value,this.editorOptionCached.language)),this.modelSet=!0;else if(this.modelSet){const e=this.editorInstance.getModel();this.preservePositionAndSelections(()=>{e.modified.setValue(this.value),e.original.setValue(this.nzOriginalText)})}else{const e=this.editorOptionCached.language;this.editorInstance.setModel({original:monaco.editor.createModel(this.nzOriginalText,e),modified:monaco.editor.createModel(this.value,e)}),this.modelSet=!0}}}preservePositionAndSelections(e){if(!this.editorInstance)return void e();const r=this.editorInstance.getPosition(),l=this.editorInstance.getSelections();e(),r&&this.editorInstance.setPosition(r),l&&this.editorInstance.setSelections(l)}setValueEmitter(){const e="normal"===this.nzEditorMode?this.editorInstance.getModel():this.editorInstance.getModel().modified;this.onDidChangeContentDisposable=e.onDidChangeContent(()=>{this.emitValue(e.getValue())})}emitValue(e){this.value!==e&&(this.value=e,this.ngZone.run(()=>{this.onChange(e)}))}updateOptionToMonaco(){this.editorInstance&&this.editorInstance.updateOptions({...this.editorOptionCached})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(ct),t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(st.t4))},i.\u0275cmp=t.Xpm({type:i,selectors:[["nz-code-editor"]],inputs:{nzEditorMode:"nzEditorMode",nzOriginalText:"nzOriginalText",nzLoading:"nzLoading",nzFullControl:"nzFullControl",nzToolkit:"nzToolkit",nzEditorOption:"nzEditorOption"},outputs:{nzEditorInitialized:"nzEditorInitialized"},exportAs:["nzCodeEditor"],features:[t._Bn([{provide:v.JU,useExisting:(0,t.Gpc)(()=>i),multi:!0}])],decls:2,vars:2,consts:[["class","ant-code-editor-loading",4,"ngIf"],["class","ant-code-editor-toolkit",4,"ngIf"],[1,"ant-code-editor-loading"],[1,"ant-code-editor-toolkit"],[3,"ngTemplateOutlet"]],template:function(e,r){1&e&&(t.YNc(0,rt,2,0,"div",0),t.YNc(1,dt,2,1,"div",1)),2&e&&(t.Q6J("ngIf",r.nzLoading),t.xp6(1),t.Q6J("ngIf",r.nzToolkit))},dependencies:[f.O5,f.tP,_.W],encapsulation:2,changeDetection:0}),(0,Z.gn)([(0,U.yF)()],i.prototype,"nzLoading",void 0),(0,Z.gn)([(0,U.yF)()],i.prototype,"nzFullControl",void 0),i})(),ht=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[f.ez,at.PV,_.j]}),i})();var tt=n(73679),mt=n(83420);function ut(i,m){if(1&i&&t._UZ(0,"nz-option",6),2&i){const e=m.$implicit;t.Q6J("nzLabel",e.label)("nzValue",e.value)}}function gt(i,m){if(1&i){const e=t.EpF();t.TgZ(0,"jsonforms",7),t.NdJ("dataChange",function(l){t.CHM(e);const c=t.oxw();return t.KtG(c.log("dataChange",l))})("submitted",function(l){t.CHM(e);const c=t.oxw();return t.KtG(c.submitted("submitted",l))})("dataChange",function(l){t.CHM(e);const c=t.oxw();return t.KtG(c.formData=l)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("data",e.formData)("config",e.jsonformsConfig)("renderers",e.renderers)("schema",e.schema)("submitLoading",e.loading)("uischema",e.uischema)}}const H=function(){return{language:"json",theme:"vs-dark"}};let ft=(()=>{class i{constructor(){this.renderers=C.fnY,this.schema=o,this.uischema=b,this.schemaCode=JSON.stringify(o,null,2),this.uischemaCode=JSON.stringify(b,null,2),this.formData=null,this.jsonformsConfig=z.u,this.jsonformsConfigCode=JSON.stringify(z.u,null,2),this.options=[{label:"Vertical Layout",value:"default"},{label:"Simple group with submit",value:"group-button"},{label:"Array",value:"array"},{label:"Simple array with one property",value:"item-array"},{label:"List with details",value:"listDetails"},{label:"Rule",value:"rule"}]}log(e,r){console.log("======"+e+"======"),console.log(r),console.log("============")}updateSchema(e){this.schema=null,this.schema=JSON.parse(e)}updateUiSchema(e){this.uischema=null,this.uischema=JSON.parse(e)}selectTemplate(e){switch(e){case"group-button":this.schema=D_schema,this.uischema=D_uiSchema;break;case"array":this.schema=x_schema,this.uischema=x_uiSchema;break;case"item-array":this.schema=y_schema,this.uischema=y_uiSchema;break;case"listDetails":this.schema=O_schema,this.uischema=O_uiSchema;break;case"rule":this.schema=E_schema,this.uischema=E_uiSchema;break;default:this.schema=o,this.uischema=b}this.updateSchemaCode()}updateSchemaCode(){this.schemaCode=JSON.stringify(this.schema,null,2),this.uischemaCode=JSON.stringify(this.uischema,null,2)}submitted(e,r){this.loading=!0,setTimeout(()=>this.loading=!1,1e3),this.log("submitted",r)}updateConfig(e){this.jsonformsConfig=z.u,this.jsonformsConfig=JSON.parse(e)}static#t=this.\u0275fac=function(r){return new(r||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-playground-page"]],standalone:!0,features:[t.jDz],decls:15,vars:11,consts:[["nz-row","","nzGutter","20"],["nz-col","","nzSpan","12"],["ngModel","demo","nzPlaceHolder","Use demo template",3,"ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],[1,"editor",3,"ngModel","nzEditorOption","ngModelChange"],[3,"data","config","renderers","schema","submitLoading","uischema","dataChange","submitted",4,"ngIf"],[3,"nzLabel","nzValue"],[3,"data","config","renderers","schema","submitLoading","uischema","dataChange","submitted"]],template:function(r,l){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nz-select",2),t.NdJ("ngModelChange",function(g){return l.selectTemplate(g)}),t.YNc(3,ut,1,2,"nz-option",3),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"Schema editor"),t.qZA(),t.TgZ(6,"nz-code-editor",4),t.NdJ("ngModelChange",function(g){return l.updateSchema(g)}),t.qZA(),t.TgZ(7,"h2"),t._uU(8,"UI Schema editor"),t.qZA(),t.TgZ(9,"nz-code-editor",4),t.NdJ("ngModelChange",function(g){return l.updateUiSchema(g)}),t.qZA(),t.TgZ(10,"h2"),t._uU(11,"Config editor"),t.qZA(),t.TgZ(12,"nz-code-editor",4),t.NdJ("ngModelChange",function(g){return l.updateConfig(g)}),t.qZA()(),t.TgZ(13,"div",1),t.YNc(14,gt,1,6,"jsonforms",5),t.qZA()()),2&r&&(t.xp6(3),t.Q6J("ngForOf",l.options),t.xp6(3),t.Q6J("ngModel",l.schemaCode)("nzEditorOption",t.DdM(8,H)),t.xp6(3),t.Q6J("ngModel",l.uischemaCode)("nzEditorOption",t.DdM(9,H)),t.xp6(3),t.Q6J("ngModel",l.jsonformsConfigCode)("nzEditorOption",t.DdM(10,H)),t.xp6(2),t.Q6J("ngIf",l.schema&&l.uischema))},dependencies:[A.U5,tt.t3,tt.SK,T.LV,T.Ip,T.Vq,f.sg,v.u5,v.JJ,v.On,ht,pt,C.gUY,f.O5,mt.C],styles:["[_nghost-%COMP%]{display:block;padding:24px}nz-select[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}h2[_ngcontent-%COMP%]{margin:0}.editor[_ngcontent-%COMP%]{display:block;width:100%;height:350px;border:2px solid #ccc;margin:1em 0}"]})}return i})()},65681:(ot,N,n)=>{n.d(N,{W:()=>J,j:()=>j});var C=n(97582),o=n(94650),b=n(77579),Q=n(61135),G=n(4707),x=n(5963),B=n(68675),K=n(71884),D=n(63900),W=n(54482),X=n(25032),O=n(25403),k=n(38421),y=n(82722),$=n(72536),L=n(3187),E=n(40445),z=n(36895),A=n(49643);function T(s,h){1&s&&(o.TgZ(0,"span",3),o._UZ(1,"i",4)(2,"i",4)(3,"i",4)(4,"i",4),o.qZA())}function f(s,h){}function v(s,h){if(1&s&&(o.TgZ(0,"div",8),o._uU(1),o.qZA()),2&s){const a=o.oxw(2);o.xp6(1),o.Oqu(a.nzTip)}}function Z(s,h){if(1&s&&(o.TgZ(0,"div")(1,"div",5),o.YNc(2,f,0,0,"ng-template",6),o.YNc(3,v,2,1,"div",7),o.qZA()()),2&s){const a=o.oxw(),d=o.MAs(1);o.xp6(1),o.ekj("ant-spin-rtl","rtl"===a.dir)("ant-spin-spinning",a.isLoading)("ant-spin-lg","large"===a.nzSize)("ant-spin-sm","small"===a.nzSize)("ant-spin-show-text",a.nzTip),o.xp6(1),o.Q6J("ngTemplateOutlet",a.nzIndicator||d),o.xp6(1),o.Q6J("ngIf",a.nzTip)}}function t(s,h){if(1&s&&(o.TgZ(0,"div",9),o.Hsn(1),o.qZA()),2&s){const a=o.oxw();o.ekj("ant-spin-blur",a.isLoading)}}const F=["*"],M="spin";let J=(()=>{class s{constructor(a,d,p){this.nzConfigService=a,this.cdr=d,this.directionality=p,this._nzModuleName=M,this.nzIndicator=null,this.nzSize="default",this.nzTip=null,this.nzDelay=0,this.nzSimple=!1,this.nzSpinning=!0,this.destroy$=new b.x,this.spinning$=new Q.X(this.nzSpinning),this.delay$=new G.t(1),this.isLoading=!1,this.dir="ltr"}ngOnInit(){this.delay$.pipe((0,B.O)(this.nzDelay),(0,K.x)(),(0,D.w)(d=>0===d?this.spinning$:this.spinning$.pipe(function q(s){return(0,W.e)((h,a)=>{let d=!1,p=null,u=null;const P=()=>{if(u?.unsubscribe(),u=null,d){d=!1;const S=p;p=null,a.next(S)}};h.subscribe((0,O.x)(a,S=>{u?.unsubscribe(),d=!0,p=S,u=(0,O.x)(a,P,X.Z),(0,k.Xf)(s(S)).subscribe(u)},()=>{P(),a.complete()},void 0,()=>{p=u=null}))})}(p=>(0,x.H)(p?d:0)))),(0,y.R)(this.destroy$)).subscribe(d=>{this.isLoading=d,this.cdr.markForCheck()}),this.nzConfigService.getConfigChangeEventForComponent(M).pipe((0,y.R)(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),this.directionality.change?.pipe((0,y.R)(this.destroy$)).subscribe(d=>{this.dir=d,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(a){const{nzSpinning:d,nzDelay:p}=a;d&&this.spinning$.next(this.nzSpinning),p&&this.delay$.next(this.nzDelay)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return s.\u0275fac=function(a){return new(a||s)(o.Y36($.jY),o.Y36(o.sBO),o.Y36(E.Is,8))},s.\u0275cmp=o.Xpm({type:s,selectors:[["nz-spin"]],hostVars:2,hostBindings:function(a,d){2&a&&o.ekj("ant-spin-nested-loading",!d.nzSimple)},inputs:{nzIndicator:"nzIndicator",nzSize:"nzSize",nzTip:"nzTip",nzDelay:"nzDelay",nzSimple:"nzSimple",nzSpinning:"nzSpinning"},exportAs:["nzSpin"],features:[o.TTD],ngContentSelectors:F,decls:4,vars:2,consts:[["defaultTemplate",""],[4,"ngIf"],["class","ant-spin-container",3,"ant-spin-blur",4,"ngIf"],[1,"ant-spin-dot","ant-spin-dot-spin"],[1,"ant-spin-dot-item"],[1,"ant-spin"],[3,"ngTemplateOutlet"],["class","ant-spin-text",4,"ngIf"],[1,"ant-spin-text"],[1,"ant-spin-container"]],template:function(a,d){1&a&&(o.F$t(),o.YNc(0,T,5,0,"ng-template",null,0,o.W1O),o.YNc(2,Z,4,12,"div",1),o.YNc(3,t,2,2,"div",2)),2&a&&(o.xp6(2),o.Q6J("ngIf",d.isLoading),o.xp6(1),o.Q6J("ngIf",!d.nzSimple))},dependencies:[z.O5,z.tP],encapsulation:2}),(0,C.gn)([(0,$.oS)()],s.prototype,"nzIndicator",void 0),(0,C.gn)([(0,L.Rn)()],s.prototype,"nzDelay",void 0),(0,C.gn)([(0,L.yF)()],s.prototype,"nzSimple",void 0),(0,C.gn)([(0,L.yF)()],s.prototype,"nzSpinning",void 0),s})(),j=(()=>{class s{}return s.\u0275fac=function(a){return new(a||s)},s.\u0275mod=o.oAB({type:s}),s.\u0275inj=o.cJS({imports:[E.vT,z.ez,A.Q8]}),s})()}}]);